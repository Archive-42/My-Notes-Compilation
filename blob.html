<!DOCTYPE html>
<html lang="en">
  <head>
    <script>
      window.currentUser = null;
    </script>
    <script>
      window.rateUsdToNative = 1;
    </script>
    <title itemprop="name">Blob</title>
    <link href="pack/styles.93b05845f313a968119b.css" rel="stylesheet" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=yes, minimum-scale=1.0"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <script>
      if (window.devicePixelRatio > 1)
        document.cookie =
          "pixelRatio=" +
          window.devicePixelRatio +
          ";path=/;expires=Tue, 19 Jan 2038 03:14:07 GMT";
    </script>
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:bold,italic,bolditalic"
      rel="stylesheet"
    />
    <link
      rel="apple-touch-icon-precomposed"

    <link rel="canonical" href="blob.html" />

    <link rel="icon" href="img/favicon/favicon.png" />
  
    <meta property="og:title" content="Blob" />


    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="fb:admins" content="100001562528165" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Blob" />
    <meta name="twitter:site" content="@iliakan" />
    <meta name="twitter:creator" content="@iliakan" />

    <link rel="prev" href="text-decoder.html" />
    <link rel="next" href="file.html" />

    <script>
      (window.GoogleAnalyticsObject = "ga"),
        (window.ga = function () {
          window.ga.q.push(arguments);
        }),
        (window.ga.q = []),
        (window.ga.l = Date.now()),
        ga("create", GA_ID, "auto"),
        window.GTM_ID && ga("require", GTM_ID),
        window.currentUser
          ? ga("set", "&uid", currentUser.id)
          : ga("set", "anonymizeIp", !0),
        window.addEventListener("error", function (e) {
          var r = (e.filename || e.errorUrl) + ": " + (e.lineno || e.errorLine),
            n = e.stack || (e.error && e.error.stack);
          ga("send", "exception", {
            exDescription: e.message + " " + r + " " + n,
            exFatal: !0,
          });
        });
    </script>
    <script src="https://www.google-analytics.com/analytics.js" async></script>
    <script>
      ga("send", "pageview");
    </script>
    <script>
      (window.metrika = { reachGoal: function () {} }),
        (window.yandex_metrika_callbacks = [
          function () {
            try {
              (window.metrika = new Ya.Metrika({
                id: YANDEX_METRIKA_ID,
                webvisor: !0,
                clickmap: !0,
                params: { user: window.currentUser && window.currentUser.id },
              })),
                metrika.trackLinks({ delay: 150 }),
                window.addEventListener("error", function (r) {
                  window.metrika.reachGoal("JSERROR", {
                    src:
                      (r.filename || r.errorUrl) +
                      ": " +
                      (r.lineno || r.errorLine),
                    stack: r.stack || (r.error && r.error.stack),
                    message: r.message,
                  });
                });
            } catch (r) {}
          },
        ]);
    </script>
    <script src="https://mc.yandex.ru/metrika/watch.js" async></script>
    <script>
      window.RECAPTCHA_ID = "6LfmLAEVAAAAAJMykMnf7aY8nkyTRmYi2ynx51R1";
    </script>
    <script src="pack/init.810c8da2b4eed830d2da.js"></script>
    <script src="pack/head.282ce219a840c583fa6d.js" defer></script>
    <meta property="og:title" content="Blob" />
    <meta property="og:type" content="article" />
    <script src="pack/tutorial.dd771765a083d97231c4.js" defer></script>
    <script src="pack/footer.ce9ac5e9c03240648299.js" defer></script>
  </head>
  <body class="no-icons">


        <div class="sitetoolbar__content">
          <div class="sitetoolbar__lang-switcher">
            <button class="sitetoolbar__dropdown-button" data-dropdown-toggler>
              EN
            </button>
            <div class="sitetoolbar__dropdown-wrap">
              <div class="sitetoolbar__dropdown-body">
                <div class="sitetoolbar__lang-switcher-body">
                  <div class="supported-langs supported-langs_toolbar">
                    <div class="supported-langs__container">
                      <ul class="supported-langs__list" style="height: 200px">
                        <li class="supported-langs__item">
                          <a
                            class="supported-langs__link"
                            href="https://ar.javascript.info/"
                            ><span class="supported-langs__brief">AR</span
                            ><span>عربي</span></a
                          >
                        </li>
                        <li
                          class="
                            supported-langs__item supported-langs__item_current
                          "
                        >
                          <a class="supported-langs__link" href="blob.html"
                            ><span class="supported-langs__brief">EN</span
                            ><span>English</span></a
                          >
                        </li>
                        <li class="supported-langs__item">
                          <a
                            class="supported-langs__link"
                            href="https://es.javascript.info/blob"
                            ><span class="supported-langs__brief">ES</span
                            ><span>Español</span></a
                          >
                        </li>
                    blob"
                            ><span class="supported-langs__brief">FR</span
                            ><span>Français</span></a
                          >
                        </li>
                        <li class="supported-langs__item">
                          <a
                            class="supported-langs__link"
                            href="https://it.javascript.info/blob"
                            ><span class="supported-langs__brief">IT</span
                            ><span>Italiano</span></a
                          >
                        </li>
                        <li class="supported-langs__item">
                          <a
                            class="supported-langs__link"
                            href="https://ja.javascript.info/blob"
                            ><span class="supported-langs__brief">JA</span
                            ><span>日本語</span></a
                          >
                        </li>
                      </ul>
                      <ul class="supported-langs__list" style="height: 128px">
                        <li class="supported-langs__item">
                          <a
                            class="supported-langs__link"
                            href="https://ko.javascript.info/"
                            ><span class="supported-langs__brief">KO</span
                            ><span>한국어</span></a
                          >
                        </li>
                        <li class="supported-langs__item">
                          <a
                            class="supported-langs__link"
                            href=blob"
                            ><span class="supported-langs__brief">RU</span
                            ><span>Русский</span></a
                          >
                        </li>
                        <li class="supported-langs__item">
                          <a
                            class="supported-langs__link"
                            href="https://tr.javascript.info/blob"
                            ><span class="supported-langs__brief">TR</span
                            ><span>Türkçe</span></a
                          >
                        </li>
                        <li class="supported-langs__item">
                          <a
                            class="supported-langs__link"
                            href="https://zh.javascript.info/blob"</a
            >


   
            </div>
          </div>
        </div>

          <div class="tablet-menu__line">
            <div class="tablet-menu__content">
              <div class="share-icons">
                <span class="share-icons__title">Share</span
                >2Fblob"
                  rel="nofollow"
                ></a
                >2Fblob
              <select
                class="
                  tablet-menu__nav
                  input-select input-select input-select_small
                "
                onchange="if(this.value) window.location.href=this.value"
              >
                <option value="https://ar.javascript.info/">عربي</option>
                <option value="https://javascript.info/blob" selected>
                  English
                </option>
                <option value="https://es.javascript.info/blob">Español</option>
                <option value="https://fr.javascript.info/blob">
                  Français
                </option>
                <option value="https://it.javascript.info/blob">
                  Italiano
                </option>
                <option value="https://ja.javascript.info/blob">日本語</option>
                <option value="https://ko.javascript.info/">한국어</option>
                <option value=blob">
                  Русский
                </option>
                <option value="https://tr.javascript.info/blob">Türkçe</option>
                <option value="https://zh.javascript.info/blob">
                  简体中文
                </option>
              </select>
            </div>
          </div>
        </div>
        <progress
          class="tutorial-progress"
          data-sticky
          value="3"
          max="4"
          data-tooltip="Lesson 3 of 4"
        ></progress>
      </div>
      <div class="page page_sidebar_on page_inner_padding">
        <script>
          if (localStorage.noSidebar) {
            document.querySelector(".page").classList.remove("page_sidebar_on");
            let e = document.querySelector(".page-wrapper");
            e && e.classList.remove("page-wrapper_sidebar_on");
          }
          setTimeout(function () {
            document
              .querySelector(".page")
              .classList.add("page_sidebar-animation-on");
          });
        </script>
        <div class="page__inner">
          <main class="main main_width-limit">
            <header class="main__header">
              <div class="main__header-inner">
                <div class="main__header-group">
                  <ol class="breadcrumbs">
                    <li class="breadcrumbs__item breadcrumbs__item_home">
                      <a class="breadcrumbs__link" href="index.html"
                        ><span class="breadcrumbs__hidden-text"
                          >Tutorial</span
                        ></a
                      >
                    </li>
                    <li class="breadcrumbs__item" id="breadcrumb-1">
                      <a class="breadcrumbs__link" href="binary.html"
                        ><span>Binary data, files</span></a
                      >
                    </li>
                    <script type="application/ld+json">
                      {
                        "@context": "https://schema.org",
                        "@type": "BreadcrumbList",
                        "itemListElement": [
                          {
                            "@type": "ListItem",
                            "position": 1,
                            "name": "Tutorial",
                            "item": "https://javascript.info/"
                          },
                          {
                            "@type": "ListItem",
                            "position": 2,
                            "name": "Binary data, files",
                            "item": "https://javascript.info/binary"
                          }
                        ]
                      }
                    </script>
                  </ol>
                  <div
                    class="updated-at"
                    data-tooltip="Last updated at 5th April 2021"
                  >
                    <div class="updated-at__content">5th April 2021</div>
                  </div>
                </div>
                <h1 class="main__header-title">Blob</h1>
              </div>
            </header>
            <div class="content">
              <article
                class="formatted"
                itemscope
                itemtype="http://schema.org/TechArticle"
              >
                <meta itemprop="name" content="Blob" />
                <div
                  itemprop="author"
                  itemscope
                  itemtype="http://schema.org/Person"
                >
                  <meta itemprop="email" content="iliakan@gmail.com" /><meta
                    itemprop="name"
                    content="Ilya Kantor"
                  />
                </div>
                <div itemprop="articleBody">
                  <p>
                    <code>ArrayBuffer</code> and views are a part of ECMA
                    standard, a part of JavaScript.
                  </p>
                  <p>
                    In the browser, there are additional higher-level objects,
                    described in
                    <a href="https://www.w3.org/TR/FileAPI/">File API</a>, in
                    particular <code>Blob</code>.
                  </p>
                  <p>
                    <code>Blob</code> consists of an optional string
                    <code>type</code> (a MIME-type usually), plus
                    <code>blobParts</code> – a sequence of other
                    <code>Blob</code> objects, strings and
                    <code>BufferSource</code>.
                  </p>
                  <figure>
                    <div class="image" style="width: 659px">
                      <div
                        class="image__ratio"
                        style="padding-top: 16.84370257966616%"
                      ></div>
                      <object
                        type="image/svg+xml"
                        data="article/blob/blob.svg"
                        width="659"
                        height="111"
                        class="image__image"
                      >
                        <img
                          src="article/blob/blob.svg"
                          alt=""
                          width="659"
                          height="111"
                        />
                      </object>
                    </div>
                  </figure>
                  <p>The constructor syntax is:</p>
                  <div id="gtjr4lwd0y" data-trusted="1" class="code-example">
                    <div class="codebox code-example__codebox">
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-javascript"
                        ><code>new Blob(blobParts, options);</code></pre>
                      </div>
                    </div>
                  </div>
                  <ul>
                    <li>
                      <strong><code>blobParts</code></strong> is an array of
                      <code>Blob</code>/<code>BufferSource</code>/<code
                        >String</code
                      >
                      values.
                    </li>
                    <li>
                      <strong><code>options</code></strong> optional object:
                      <ul>
                        <li>
                          <strong><code>type</code></strong> –
                          <code>Blob</code> type, usually MIME-type, e.g.
                          <code>image/png</code>,
                        </li>
                        <li>
                          <strong><code>endings</code></strong> – whether to
                          transform end-of-line to make the
                          <code>Blob</code> correspond to current OS newlines
                          (<code>\r\n</code> or <code>\n</code>). By default
                          <code>&quot;transparent&quot;</code> (do nothing), but
                          also can be
                          <code>&quot;native&quot;</code> (transform).
                        </li>
                      </ul>
                    </li>
                  </ul>
                  <p>For example:</p>
                  <div id="rgnlc9fksm" data-trusted="1" class="code-example">
                    <div class="codebox code-example__codebox">
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-javascript"
                        ><code>// create Blob from a string
let blob = new Blob([&quot;&lt;html&gt;…&lt;/html&gt;&quot;], {type: 'text/html'});
// please note: the first argument must be an array [...]</code></pre>
                      </div>
                    </div>
                  </div>
                  <div id="fp6wj0ocbd" data-trusted="1" class="code-example">
                    <div class="codebox code-example__codebox">
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-javascript"
                        ><code>// create Blob from a typed array and strings
let hello = new Uint8Array([72, 101, 108, 108, 111]); // &quot;Hello&quot; in binary form

let blob = new Blob([hello, ' ', 'world'], {type: 'text/plain'});</code></pre>
                      </div>
                    </div>
                  </div>
                  <p>We can extract <code>Blob</code> slices with:</p>
                  <div id="jc6knq7rc2" data-trusted="1" class="code-example">
                    <div class="codebox code-example__codebox">
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-javascript"
                        ><code>blob.slice([byteStart], [byteEnd], [contentType]);</code></pre>
                      </div>
                    </div>
                  </div>
                  <ul>
                    <li>
                      <strong><code>byteStart</code></strong> – the starting
                      byte, by default 0.
                    </li>
                    <li>
                      <strong><code>byteEnd</code></strong> – the last byte
                      (exclusive, by default till the end).
                    </li>
                    <li>
                      <strong><code>contentType</code></strong> – the
                      <code>type</code> of the new blob, by default the same as
                      the source.
                    </li>
                  </ul>
                  <p>
                    The arguments are similar to <code>array.slice</code>,
                    negative numbers are allowed too.
                  </p>
                  <div class="important important_smart">
                    <div class="important__header">
                      <span class="important__type"
                        ><code>Blob</code> objects are immutable</span
                      >
                    </div>
                    <div class="important__content">
                      <p>
                        We can’t change data directly in a <code>Blob</code>,
                        but we can slice parts of a <code>Blob</code>, create
                        new <code>Blob</code> objects from them, mix them into a
                        new <code>Blob</code> and so on.
                      </p>
                      <p>
                        This behavior is similar to JavaScript strings: we can’t
                        change a character in a string, but we can make a new
                        corrected string.
                      </p>
                    </div>
                  </div>
                  <h2>
                    <a
                      class="main__anchor"
                      name="blob-as-url"
                      href="blob.html#blob-as-url"
                      >Blob as URL</a
                    >
                  </h2>
                  <p>
                    A Blob can be easily used as a URL for
                    <code>&lt;a&gt;</code>, <code>&lt;img&gt;</code> or other
                    tags, to show its contents.
                  </p>
                  <p>
                    Thanks to <code>type</code>, we can also download/upload
                    <code>Blob</code> objects, and the
                    <code>type</code> naturally becomes
                    <code>Content-Type</code> in network requests.
                  </p>
                  <p>
                    Let’s start with a simple example. By clicking on a link you
                    download a dynamically-generated <code>Blob</code> with
                    <code>hello world</code> contents as a file:
                  </p>
                  <div id="hzyhgigomf" data-trusted="1" class="code-example">
                    <div class="codebox code-example__codebox">
                      <div class="toolbar codebox__toolbar">
                        <div class="toolbar__tool">
                          <a
                            href="blob.html#"
                            title="show"
                            data-action="run"
                            class="toolbar__button toolbar__button_run"
                          ></a>
                        </div>
                        <div class="toolbar__tool">
                          <a
                            href="blob.html#"
                            title="open in sandbox"
                            target="_blank"
                            data-action="edit"
                            class="toolbar__button toolbar__button_edit"
                          ></a>
                        </div>
                      </div>
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-markup"
                        ><code>&lt;!-- download attribute forces the browser to download instead of navigating --&gt;
&lt;a download=&quot;hello.txt&quot; href='#' id=&quot;link&quot;&gt;Download&lt;/a&gt;

&lt;script&gt;
let blob = new Blob([&quot;Hello, world!&quot;], {type: 'text/plain'});

link.href = URL.createObjectURL(blob);
&lt;/script&gt;</code></pre>
                      </div>
                    </div>
                  </div>
                  <p>
                    We can also create a link dynamically in JavaScript and
                    simulate a click by <code>link.click()</code>, then download
                    starts automatically.
                  </p>
                  <p>
                    Here’s the similar code that causes user to download the
                    dynamically created <code>Blob</code>, without any HTML:
                  </p>
                  <div id="nqvu2z34kv" data-trusted="1" class="code-example">
                    <div class="codebox code-example__codebox">
                      <div class="toolbar codebox__toolbar">
                        <div class="toolbar__tool">
                          <a
                            href="blob.html#"
                            title="run"
                            data-action="run"
                            class="toolbar__button toolbar__button_run"
                          ></a>
                        </div>
                        <div class="toolbar__tool">
                          <a
                            href="blob.html#"
                            title="open in sandbox"
                            target="_blank"
                            data-action="edit"
                            class="toolbar__button toolbar__button_edit"
                          ></a>
                        </div>
                      </div>
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-javascript"
                        ><code>let link = document.createElement('a');
link.download = 'hello.txt';

let blob = new Blob(['Hello, world!'], {type: 'text/plain'});

link.href = URL.createObjectURL(blob);

link.click();

URL.revokeObjectURL(link.href);</code></pre>
                      </div>
                    </div>
                  </div>
                  <p>
                    <code>URL.createObjectURL</code> takes a
                    <code>Blob</code> and creates a unique URL for it, in the
                    form <code>blob:&lt;origin&gt;/&lt;uuid&gt;</code>.
                  </p>
                  <p>
                    That’s what the value of <code>link.href</code> looks like:
                  </p>
                  <div id="kqm5sw6gzz" data-trusted="1" class="code-example">
                    <div class="codebox code-example__codebox">
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-none"
                        ><code>blob:https://javascript.info/1e67e00e-860d-40a5-89ae-6ab0cbee6273</code></pre>
                      </div>
                    </div>
                  </div>
                  <p>
                    For each URL generated by
                    <code>URL.createObjectURL</code> the browser stores a URL →
                    <code>Blob</code> mapping internally. So such URLs are
                    short, but allow to access the <code>Blob</code>.
                  </p>
                  <p>
                    A generated URL (and hence the link with it) is only valid
                    within the current document, while it’s open. And it allows
                    to reference the <code>Blob</code> in
                    <code>&lt;img&gt;</code>, <code>&lt;a&gt;</code>, basically
                    any other object that expects a URL.
                  </p>
                  <p>
                    There’s a side-effect though. While there’s a mapping for a
                    <code>Blob</code>, the <code>Blob</code> itself resides in
                    the memory. The browser can’t free it.
                  </p>
                  <p>
                    The mapping is automatically cleared on document unload, so
                    <code>Blob</code> objects are freed then. But if an app is
                    long-living, then that doesn’t happen soon.
                  </p>
                  <p>
                    <strong
                      >So if we create a URL, that <code>Blob</code> will hang
                      in memory, even if not needed any more.</strong
                    >
                  </p>
                  <p>
                    <code>URL.revokeObjectURL(url)</code> removes the reference
                    from the internal mapping, thus allowing the
                    <code>Blob</code> to be deleted (if there are no other
                    references), and the memory to be freed.
                  </p>
                  <p>
                    In the last example, we intend the <code>Blob</code> to be
                    used only once, for instant downloading, so we call
                    <code>URL.revokeObjectURL(link.href)</code> immediately.
                  </p>
                  <p>
                    In the previous example with the clickable HTML-link, we
                    don’t call <code>URL.revokeObjectURL(link.href)</code>,
                    because that would make the <code>Blob</code> url invalid.
                    After the revocation, as the mapping is removed, the URL
                    doesn’t work any more.
                  </p>
                  <h2>
                    <a
                      class="main__anchor"
                      name="blob-to-base64"
                      href="blob.html#blob-to-base64"
                      >Blob to base64</a
                    >
                  </h2>
                  <p>
                    An alternative to <code>URL.createObjectURL</code> is to
                    convert a <code>Blob</code> into a base64-encoded string.
                  </p>
                  <p>
                    That encoding represents binary data as a string of
                    ultra-safe “readable” characters with ASCII-codes from 0 to
                    64. And what’s more important – we can use this encoding in
                    “data-urls”.
                  </p>
                  <p>
                    A
                    <a
                      href="https://developer.mozilla.org/en-US/docs/Web/http/Data_URIs"
                      >data url</a
                    >
                    has the form
                    <code>data:[&lt;mediatype&gt;][;base64],&lt;data&gt;</code>.
                    We can use such urls everywhere, on par with “regular” urls.
                  </p>
                  <p>For instance, here’s a smiley:</p>
                  <div id="6f2hksfeql" data-trusted="1" class="code-example">
                    <div class="codebox code-example__codebox">
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-markup"
                        ><code>&lt;img src=&quot;data:image/png;base64,R0lGODlhDAAMAKIFAF5LAP/zxAAAANyuAP/gaP///wAAAAAAACH5BAEAAAUALAAAAAAMAAwAAAMlWLPcGjDKFYi9lxKBOaGcF35DhWHamZUW0K4mAbiwWtuf0uxFAgA7&quot;&gt;</code></pre>
                      </div>
                    </div>
                  </div>
                  <p>
                    The browser will decode the string and show the image:
                    <img
                      src="data:image/png;base64,R0lGODlhDAAMAKIFAF5LAP/zxAAAANyuAP/gaP///wAAAAAAACH5BAEAAAUALAAAAAAMAAwAAAMlWLPcGjDKFYi9lxKBOaGcF35DhWHamZUW0K4mAbiwWtuf0uxFAgA7"
                    />
                  </p>
                  <p>
                    To transform a <code>Blob</code> into base64, we’ll use the
                    built-in <code>FileReader</code> object. It can read data
                    from Blobs in multiple formats. In the
                    <a href="file.html">next chapter</a> we’ll cover it more
                    in-depth.
                  </p>
                  <p>Here’s the demo of downloading a blob, now via base-64:</p>
                  <div
                    id="1yp62zg3pi"
                    data-trusted="1"
                    class="code-example"
                    data-highlight='[{"start":5,"end":6}]'
                  >
                    <div class="codebox code-example__codebox">
                      <div class="toolbar codebox__toolbar">
                        <div class="toolbar__tool">
                          <a
                            href="blob.html#"
                            title="run"
                            data-action="run"
                            class="toolbar__button toolbar__button_run"
                          ></a>
                        </div>
                        <div class="toolbar__tool">
                          <a
                            href="blob.html#"
                            title="open in sandbox"
                            target="_blank"
                            data-action="edit"
                            class="toolbar__button toolbar__button_edit"
                          ></a>
                        </div>
                      </div>
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-javascript"
                        ><code>let link = document.createElement('a');
link.download = 'hello.txt';

let blob = new Blob(['Hello, world!'], {type: 'text/plain'});

let reader = new FileReader();
reader.readAsDataURL(blob); // converts the blob to base64 and calls onload

reader.onload = function() {
  link.href = reader.result; // data url
  link.click();
};</code></pre>
                      </div>
                    </div>
                  </div>
                  <p>
                    Both ways of making a URL of a <code>Blob</code> are usable.
                    But usually <code>URL.createObjectURL(blob)</code> is
                    simpler and faster.
                  </p>
                  <div class="balance">
                    <div class="balance__pluses">
                      <div class="balance__content">
                        <div class="balance__title">
                          URL.createObjectURL(blob)
                        </div>
                        <ul class="balance__list">
                          <li>We need to revoke them if care about memory.</li>
                          <li>Direct access to blob, no “encoding/decoding”</li>
                        </ul>
                      </div>
                    </div>
                    <div class="balance__minuses">
                      <div class="balance__content">
                        <div class="balance__title">Blob to data url</div>
                        <ul class="balance__list">
                          <li>No need to revoke anything.</li>
                          <li>
                            Performance and memory losses on big
                            <code>Blob</code> objects for encoding.
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <h2>
                    <a
                      class="main__anchor"
                      name="image-to-blob"
                      href="blob.html#image-to-blob"
                      >Image to blob</a
                    >
                  </h2>
                  <p>
                    We can create a <code>Blob</code> of an image, an image
                    part, or even make a page screenshot. That’s handy to upload
                    it somewhere.
                  </p>
                  <p>
                    Image operations are done via
                    <code>&lt;canvas&gt;</code> element:
                  </p>
                  <ol>
                    <li>
                      Draw an image (or its part) on canvas using
                      <a
                        href="https://developer.mozilla.org/en-US/docs/Web/api/CanvasRenderingContext2D/drawImage"
                        >canvas.drawImage</a
                      >.
                    </li>
                    <li>
                      Call canvas method
                      <a
                        href="https://developer.mozilla.org/en-US/docs/Web/api/HTMLCanvasElement/toBlob"
                        >.toBlob(callback, format, quality)</a
                      >
                      that creates a <code>Blob</code> and runs
                      <code>callback</code> with it when done.
                    </li>
                  </ol>
                  <p>
                    In the example below, an image is just copied, but we could
                    cut from it, or transform it on canvas prior to making a
                    blob:
                  </p>
                  <div id="m3fa8qdg4y" data-trusted="1" class="code-example">
                    <div class="codebox code-example__codebox">
                      <div class="toolbar codebox__toolbar">
                        <div class="toolbar__tool">
                          <a
                            href="blob.html#"
                            title="run"
                            data-action="run"
                            class="toolbar__button toolbar__button_run"
                          ></a>
                        </div>
                        <div class="toolbar__tool">
                          <a
                            href="blob.html#"
                            title="open in sandbox"
                            target="_blank"
                            data-action="edit"
                            class="toolbar__button toolbar__button_edit"
                          ></a>
                        </div>
                      </div>
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-javascript"
                        ><code>// take any image
let img = document.querySelector('img');

// make &lt;canvas&gt; of the same size
let canvas = document.createElement('canvas');
canvas.width = img.clientWidth;
canvas.height = img.clientHeight;

let context = canvas.getContext('2d');

// copy image to it (this method allows to cut image)
context.drawImage(img, 0, 0);
// we can context.rotate(), and do many other things on canvas

// toBlob is async operation, callback is called when done
canvas.toBlob(function(blob) {
  // blob ready, download it
  let link = document.createElement('a');
  link.download = 'example.png';

  link.href = URL.createObjectURL(blob);
  link.click();

  // delete the internal blob reference, to let the browser clear memory from it
  URL.revokeObjectURL(link.href);
}, 'image/png');</code></pre>
                      </div>
                    </div>
                  </div>
                  <p>
                    If we prefer <code>async/await</code> instead of callbacks:
                  </p>
                  <div id="7iqvvyfjhj" data-trusted="1" class="code-example">
                    <div class="codebox code-example__codebox">
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-javascript"
                        ><code>let blob = await new Promise(resolve =&gt; canvasElem.toBlob(resolve, 'image/png'));</code></pre>
                      </div>
                    </div>
                  </div>
                  <p>
                    For screenshotting a page, we can use a library such as
                    <a href="https://github.com/niklasvh/html2canvas"
                      >https://github.com/niklasvh/html2canvas</a
                    >. What it does is just walks the page and draws it on
                    <code>&lt;canvas&gt;</code>. Then we can get a
                    <code>Blob</code> of it the same way as above.
                  </p>
                  <h2>
                    <a
                      class="main__anchor"
                      name="from-blob-to-arraybuffer"
                      href="blob.html#from-blob-to-arraybuffer"
                      >From Blob to ArrayBuffer</a
                    >
                  </h2>
                  <p>
                    The <code>Blob</code> constructor allows to create a blob
                    from almost anything, including any
                    <code>BufferSource</code>.
                  </p>
                  <p>
                    But if we need to perform low-level processing, we can get
                    the lowest-level <code>ArrayBuffer</code> from it using
                    <code>FileReader</code>:
                  </p>
                  <div
                    id="g6b5r0kxdo"
                    data-trusted="1"
                    class="code-example"
                    data-highlight='[{"start":3,"end":3}]'
                  >
                    <div class="codebox code-example__codebox">
                      <div class="codebox__code" data-code="1">
                        <pre
                          class="line-numbers language-javascript"
                        ><code>// get arrayBuffer from blob
let fileReader = new FileReader();

fileReader.readAsArrayBuffer(blob);

fileReader.onload = function(event) {
  let arrayBuffer = fileReader.result;
};</code></pre>
                      </div>
                    </div>
                  </div>
                  <h2>
                    <a
                      class="main__anchor"
                      name="summary"
                      href="blob.html#summary"
                      >Summary</a
                    >
                  </h2>
                  <p>
                    While <code>ArrayBuffer</code>, <code>Uint8Array</code> and
                    other <code>BufferSource</code> are “binary data”, a
                    <a href="https://www.w3.org/TR/FileAPI/#dfn-Blob">Blob</a>
                    represents “binary data with type”.
                  </p>
                  <p>
                    That makes Blobs convenient for upload/download operations,
                    that are so common in the browser.
                  </p>
                  <p>
                    Methods that perform web-requests, such as
                    <a href="xmlhttprequest.html">XMLHttpRequest</a>,
                    <a href="fetch.html">fetch</a> and so on, can work with
                    <code>Blob</code> natively, as well as with other binary
                    types.
                  </p>
                  <p>
                    We can easily convert between <code>Blob</code> and
                    low-level binary data types:
                  </p>
                  <ul>
                    <li>
                      We can make a Blob from a typed array using
                      <code>new Blob(...)</code> constructor.
                    </li>
                    <li>
                      We can get back <code>ArrayBuffer</code> from a Blob using
                      <code>FileReader</code>, and then create a view over it
                      for low-level binary processing.
                    </li>
                  </ul>
                </div>
              </article>
            </div>
            <div class="page__nav-wrap">
              <a
                class="page__nav page__nav_prev"
                href="text-decoder.html"
                data-tooltip="TextDecoder and TextEncoder"
                ><span class="page__nav-text"
                  ><span class="page__nav-text-shortcut"></span></span
                ><span class="page__nav-text-alternate"
                  >Previous lesson</span
                ></a
              ><a
                class="page__nav page__nav_next"
                href="file.html"
                data-tooltip="File and FileReader"
                ><span class="page__nav-text"
                  ><span class="page__nav-text-shortcut"></span></span
                ><span class="page__nav-text-alternate">Next lesson</span></a
              >
            </div>
            <div class="article-tablet-foot tablet-only">
              <div class="article-tablet-foot__layout">
                <div class="share-icons">
                  <span class="share-icons__title">Share</span
                  ><a
                    class="share share_tw"
                    s%3A%2F%2Fjavascript.info%2Fblob"
                    rel="nofollow"
                  ></a
                  ><a
                    class="share share_fb"
                    href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p%5Burl%5D=https%3A%2F%2Fjavascript.info%2Fblob"
                    rel="nofollow"
                  ></a>
                </div>
                <div class="article-tablet-foot__map">
                  <a
                    class="map"
                    href="tutorial/map.html"
                    data-action="tutorial-map"
                    ><span class="map__text">Tutorial map</span></a
                  >
                </div>
              </div>
            </div>
            
                  <a href="blob.html name="comments">Comments</a>
                </h2>
                <div class="comments__read-before">
                  <span class="comments__read-before-link"
                    >read this before commenting…</span
                  >
                  <div class="comments__read-before-popup">
                    <div class="comments__read-before-popup-i">
                      <ul>
                        <li>
                          If you have suggestions what to improve - please
                        
                          or a pull request instead of commenting.
                        </li>
                        <li>
                          If you can't understand something in the article –
                          please elaborate.
                        </li>
                        <li>
                          To insert few words of code, use the
                          <code>&lt;code&gt;</code> tag, for several lines –
                          wrap them in <code>&lt;pre&gt;</code> tag, for more
                          than 10 lines – use a sandbox (<a
                            href="https://plnkr.co/edit/?p=preview"
                            >plnkr</a
                          >, <a href="https://jsbin.com">jsbin</a>,
                          <a href="http://codepen.io">codepen</a>…)
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
              <div id="disqus_thread"></div>
              <script>
                var disqus_config = function () {
                  if (!this.page) this.page = {};
                  Object.assign(this.page, {
                    url: "https:\/\/javascript.info\/blob",
                    identifier: "\/blob",
                  });
                };
              </script>
              <script>
                var disqus_shortname = "javascriptinfo";
              </script>
              <script>
                var disqus_enabled = true;
              </script>
            </div>
          </main>
        </div>


                      <a class="sidebar__link" href="binary.html"
                        >Binary data, files</a
                      >
                    </li>
                  </ul>
                </nav>
                <h4 class="sidebar__section-title">Lesson navigation</h4>

                      <a class="sidebar__link" href="blob.html#blob-as-url"
                        >Blob as URL</a
                      >
                    </li>
                    <li class="sidebar__navigation-link">
                      <a class="sidebar__link" href="blob.html#blob-to-base64"
                        >Blob to base64</a
                      >
                    </li>
                    <li class="sidebar__navigation-link">
                      <a class="sidebar__link" href="blob.html#image-to-blob"
                        >Image to blob</a
                      >
                    </li>
                    <li class="sidebar__navigation-link">
                   blob.html#from-blob-to-arraybuffer"
                        >From Blob to ArrayBuffer</a
                      >
                    </li>
                    <li class="sidebar__navigation-link">
                      <a class="sidebar__link" href="blob.html
                  </ul>
                </nav>

                      <a class="sidebar__link" href="blob.html
                        >Comments</a
                      >
                    </li>
                  </ul>
                </nav>
              </div>
           <a
                  class="share share_tw sidebar__share"
                  s%3A%2F%2Fjavascript.info%2Fblob"
                  rel="nofollow"
                ></a
                ><a
                  class="share share_fb sidebar__share"
                  href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p[url]=https%3A%2F%2Fjavascript.info%2Fblob"
                  rel="nofollow"
                ></a>
                <a
                  class="sidebar__link"
                  href="https://github.com/javascript-tutorial/en.javascript.info/blob/master/4-binary/03-blob"
                  rel="nofollow"
                  >Edit on GitHub</a
                >
              </div>
              <div class="sidebar__section" id="sponsorBar">
                <div class="sidebar__section-title" id="sponsorBarTitle"></div>
                <div id="sponsorBarContent"></div>
                <script>
                  window.initSponsorBar();
                </script>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="page-footer">
      <ul class="page-footer__list">
        <li class="page-footer__item page-footer__item_copy">
          ©&nbsp;2007—2021&nbsp; Ilya Kantor
        </li>
        <li class="page-footer__item page-footer__item_about">
          <a class="page-footer__link" href="about.html">about the project</a>
        </li>
        <li class="page-footer__item page-footer__item_contact">
          <a class="page-footer__link" href="about.html#contact-us"
            >contact us</a
          >
        </li>
        <li class="page-footer__item page-footer__item_terms">
          <a class="page-footer__link" href="terms.html">terms of usage</a>
        </li>
        <li class="page-footer__item page-footer__item_privacy">
          <a class="page-footer__link" href="privacy.html">privacy policy</a>
        </li>
      </ul>
    </div>
  </body>
</html>
